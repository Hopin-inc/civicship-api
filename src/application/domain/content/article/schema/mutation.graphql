# ------------------------------
# Article Mutation Definitions
# ------------------------------
extend type Mutation {
    articleCreate(
        input: ArticleCreateInput!
        permission: CheckCommunityPermissionInput!
    ): ArticleCreatePayload
    @authz(rules: [IsCommunityManager])

    articleUpdateContent(
        id: ID!
        input: ArticleUpdateContentInput!
        permission: CheckCommunityPermissionInput!
    ): ArticleUpdateContentPayload
    @authz(rules: [IsCommunityManager])

    articleDelete(
        id: ID!
        permission: CheckCommunityPermissionInput!
    ): ArticleDeletePayload
    @authz(rules: [IsCommunityManager])

    articleSetPublishStatus(
        id: ID!
        input: ArticleSetPublishStatusInput!
        permission: CheckCommunityPermissionInput!
    ): ArticleSetPublishStatusPayload
    @authz(rules: [IsCommunityManager])
}

# ------------------------------
# Article Mutation Input Definitions
# ------------------------------
input ArticleCreateInput {
    title: String!
    introduction: String!
    body: String
    thumbnail: ImageInput
    category: ArticleCategory!
    publishStatus: PublishStatus!

    authorIds: [ID!]!
    relatedUserIds: [ID!]
    relatedOpportunityIds: [ID!]

    communityId: ID!

    publishedAt: Datetime
}

input ArticleUpdateContentInput {
    title: String!
    introduction: String!
    body: String
    thumbnail: ImageInput
    category: ArticleCategory!

    authorIds: [ID!]!
    relatedUserIds: [ID!]
    relatedOpportunityIds: [ID!]

    publishedAt: Datetime
}

input ArticleSetPublishStatusInput {
    publishStatus: PublishStatus!
}

# ------------------------------
# Article Mutation Success Type Definitions
# ------------------------------
type ArticleCreateSuccess {
    article: Article!
}

type ArticleUpdateContentSuccess {
    article: Article!
}

type ArticleDeleteSuccess {
    articleId: ID!
}

type ArticleSetPublishStatusSuccess {
    article: Article!
}

# ------------------------------
# Article Mutation Union (Payload) Definitions
# ------------------------------
union ArticleCreatePayload =
    ArticleCreateSuccess

union ArticleUpdateContentPayload =
    ArticleUpdateContentSuccess

union ArticleDeletePayload =
    ArticleDeleteSuccess

union ArticleSetPublishStatusPayload =
    ArticleSetPublishStatusSuccess
