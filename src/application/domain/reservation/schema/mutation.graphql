# ------------------------------
# Reservation Mutation Definitions
# ------------------------------

extend type Mutation {
    reservationCreate(
        input: ReservationCreateInput!
    ): ReservationCreatePayload

    reservationJoin(
        id: ID!
    ): ReservationSetStatusPayload

    reservationCancel(
        id: ID!
        input: ReservationCancelInput!
        permission: CheckIsSelfPermissionInput!
    ): ReservationSetStatusPayload

    reservationAccept(
        id: ID!
        permission: CheckCommunityPermissionInput!
    ): ReservationSetStatusPayload

    reservationReject(
        id: ID!
        permission: CheckCommunityPermissionInput!
    ): ReservationSetStatusPayload
}

# ------------------------------
# Reservation Mutation Input Definitions
# ------------------------------

input ReservationCreateInput {
    opportunitySlotId: ID!
    totalParticipantCount: Int!
    otherUserIds: [ID!]

    paymentMethod: ReservationPaymentMethod!
    ticketIdsIfNeed: [ID!]
}

input ReservationCancelInput {
    paymentMethod: ReservationPaymentMethod!
    ticketIdsIfExists: [ID!]
}

# ------------------------------
# Reservation Mutation Enum Definitions
# ------------------------------

enum ReservationPaymentMethod {
    FEE
    TICKET
}

# ------------------------------
# Reservation Mutation Success Type Definitions
# ------------------------------

type ReservationCreateSuccess {
    reservation: Reservation!
}

type ReservationSetStatusSuccess {
    reservation: Reservation!
}

# ------------------------------
# Reservation Mutation Union (Payload) Definitions
# ------------------------------

union ReservationCreatePayload =
    ReservationCreateSuccess

union ReservationSetStatusPayload =
    ReservationSetStatusSuccess
