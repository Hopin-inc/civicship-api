# ------------------------------
# Membership Mutation Definitions
# ------------------------------
extend type Mutation {
    # invite
    membershipInvite(
        input: MembershipInviteInput!
        permission:CheckCommunityPermissionInput!
    ): MembershipInvitePayload
    membershipCancelInvitation(
        input: MembershipSetInvitationStatusInput!
        permission:CheckCommunityPermissionInput!
    ): MembershipSetInvitationStatusPayload

    membershipAcceptMyInvitation(
        input: MembershipSetInvitationStatusInput!
        permission: CheckIsSelfPermissionInput!
    ): MembershipSetInvitationStatusPayload
    membershipDenyMyInvitation(
        input: MembershipSetInvitationStatusInput!
        permission: CheckIsSelfPermissionInput!
    ): MembershipSetInvitationStatusPayload

    # join
    membershipWithdraw(
        input: MembershipWithdrawInput!
        permission: CheckIsSelfPermissionInput!
    ): MembershipWithdrawPayload

    # role
    membershipAssignOwner(
        input: MembershipSetRoleInput!
        permission:CheckCommunityPermissionInput!
    ): MembershipSetRolePayload
    membershipAssignManager(
        input: MembershipSetRoleInput!
        permission:CheckCommunityPermissionInput!
    ): MembershipSetRolePayload
    membershipAssignMember(
        input: MembershipSetRoleInput!
        permission:CheckCommunityPermissionInput!
    ): MembershipSetRolePayload
    membershipRemove(
        input: MembershipRemoveInput!
        permission:CheckCommunityPermissionInput!
    ): MembershipRemovePayload
}

# ------------------------------
# Membership Mutation Input Definitions
# ------------------------------
input MembershipInviteInput {
    userId: ID!
    role: Role

    """Used for permission checking."""
    communityId: ID!
}

input MembershipSetInvitationStatusInput {
    userId: ID!

    """Used for permission checking."""
    communityId: ID!
}

input MembershipWithdrawInput {
    userId: ID!

    """Used for permission checking."""
    communityId: ID!
}

input MembershipSetRoleInput {
    userId: ID!

    """Used for permission checking."""
    communityId: ID!
}

input MembershipRemoveInput {
    userId: ID!

    """Used for permission checking."""
    communityId: ID!
}

# ------------------------------
# Membership Mutation Success Type Definitions
# ------------------------------
type MembershipInviteSuccess {
    membership: Membership!
}

type MembershipSetRoleSuccess {
    membership: Membership!
}

type MembershipRemoveSuccess {
    userId: ID!
    communityId: ID!
}

type MembershipWithdrawSuccess {
    userId: ID!
    communityId: ID!
}

type MembershipSetInvitationStatusSuccess {
    membership: Membership!
}

# ------------------------------
# Membership Mutation Union (Payload) Definitions
# ------------------------------
union MembershipInvitePayload =
    MembershipInviteSuccess |
    InvalidInputValueError |
    AuthError |
    ComplexQueryError

union MembershipSetRolePayload =
    MembershipSetRoleSuccess |
    InvalidInputValueError |
    AuthError |
    ComplexQueryError

union MembershipRemovePayload =
    MembershipRemoveSuccess |
    InvalidInputValueError |
    AuthError |
    ComplexQueryError

union MembershipWithdrawPayload =
    MembershipWithdrawSuccess |
    InvalidInputValueError |
    AuthError |
    ComplexQueryError

union MembershipSetInvitationStatusPayload =
    MembershipSetInvitationStatusSuccess |
    InvalidInputValueError |
    AuthError |
    ComplexQueryError
