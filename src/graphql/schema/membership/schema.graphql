# Queries and Mutations

extend type Query {
    memberships(
        filter: MembershipFilterInput
        sort: MembershipSortInput
        cursor: String
        first: Int
    ): MembershipsConnection!
    membership(userId: ID!, communityId: ID!): Membership

    wallets(
        filter: WalletFilterInput
        sort: WalletSortInput
        cursor: String
        first: Int
    ): WalletsConnection!
    wallet(id: ID!): Wallet
}

extend type Mutation {
    # invite
    membershipInvite(id: ID!, input: MembershipInviteInput!): MembershipInvitePayload
    membershipCancelInvitation(id: ID!): MembershipSetInvitationStatusPayload
    membershipApproveInvitation(id: ID!): MembershipSetInvitationStatusPayload
    membershipDenyInvitation(id: ID!): MembershipSetInvitationStatusPayload

    # join
    membershipSelfJoin(id: ID!, input: MembershipSelfJoinInput!): MembershipSelfJoinPayload
    membershipWithdraw(id: ID!): MembershipWithdrawPayload

    # role
    membershipAssignOwner(id: ID!): MembershipSetRolePayload
    membershipAssignManager(id: ID!): MembershipSetRolePayload
    membershipAssignMemberRole(id: ID!): MembershipSetRolePayload
    membershipRemove(id: ID!): MembershipRemovePayload
}

# Type definitions

type Membership {
    user: User!
    community: Community!
    status: MembershipStatus
    role: Role!

    createdAt: Datetime!
    updatedAt: Datetime
}

type Wallet {
    id: ID!
    type: WalletType!
    community: Community!
    user: User
    currentPointView: CurrentPointView

    fromTransactions: [Transaction!]
    toTransactions: [Transaction!]

    createdAt: Datetime!
    updatedAt: Datetime
}

type CurrentPointView {
    walletId: String!
    currentPoint: Int!
}