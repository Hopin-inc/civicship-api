model Opportunity {
  id          String    @id @default(cuid())
  title       String
  description String
  body        String?
  image       String?
  /// [ArrayOfString]
  files       Json      @default("[]")
  startsAt    DateTime? @map("starts_at")
  endsAt      DateTime? @map("ends_at")

  source        OpportunitySource
  category      OpportunityCategory
  hostingStatus OpportunityHostingStatus @default(SCHEDULED)
  publishStatus PublishStatus            @default(PUBLIC) @map("publish_status")

  requireApproval   Boolean   @default(false) @map("require_approval")
  capacity          Int?
  pointsToEarn      Int?      @map("points_to_earn")
  feeRequired       Int?      @map("fee_required")
  requiredUtilities Utility[]

  placeId String? @map("place_id")
  place   Place?  @relation(fields: [placeId], references: [id], onDelete: Restrict)

  slots          OpportunitySlot[]
  invitations    OpportunityInvitation[]
  participations Participation[]

  articles Article[] @relation("t_opportunities_on_articles")

  communityId String?    @map("community_id")
  community   Community? @relation(fields: [communityId], references: [id], onDelete: Cascade)

  createdBy     String @map("created_by")
  createdByUser User   @relation(fields: [createdBy], references: [id], onDelete: SetNull)

  createdAt DateTime  @default(now()) @map("created_at")
  updatedAt DateTime? @updatedAt @map("updated_at")

  @@map("t_opportunities")
}

enum OpportunitySource {
  INTERNAL
  EXTERNAL
}

enum OpportunityCategory {
  QUEST
  EVENT
  ACTIVITY
  UNKNOWN
}

enum OpportunityHostingStatus {
  SCHEDULED
  CANCELLED
  COMPLETED
}
